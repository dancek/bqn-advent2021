Split â† ((Â¬-ËœâŠ¢Ã—Â·+`Â»âŠ¸>)âˆ˜â‰ âŠ”âŠ¢)
in â† â€¢FLines "22.txt"

ParseLine â† {ğ•Š line:
  vâ€¿rest â† ' 'Split line
  axes â† ','Split rest
  cube â† â‰>{â€¢BQNÂ¨'.'Split 1âŠ‘'='Split ğ•©}Â¨axes
  (vâ‰¡"on")â€¿cube
}

Overlap â† {((âŠğ•¨)âŒˆâŠğ•©)â‰(1âŠğ•¨)âŒŠ(1âŠğ•©)}
Overlaps â† {cube ğ•Š xs:
  os â† âŸ¨âŸ©
  {o â† cube Overlap ğ•©
   {âˆ§Â´â‰¤Ëo ? os âˆ¾â†© <o ; 0}}Â¨xs
  os
}
Volume â† {Ã—Â´1+-ËœËğ•©}
Total â† +Â´VolumeÂ¨

Run â† {ğ•Š data:
  pos â† âŸ¨âŸ©
  neg â† âŸ¨âŸ©

  {ğ•Š dirâ€¿cube:
    ns â† cube Overlaps neg
    neg âˆ¾â†© cube Overlaps pos
    pos âˆ¾â†© ns
    {dir ? pos âˆ¾â†© <cube ; 0 }
  }Â¨data
  posâ€¿neg
}

limit â† â‰3â€¿2â¥ŠÂ¯50â€¿50
data â† ParseLineÂ¨in
pâ€¿n â† Run data

â€¢Show (Total limit Overlaps p) - Total limit Overlaps n
â€¢Show (Total p) - Total n
# 588120
# 1134088247046731
