While â† {ğ•¨{ğ•Šâˆ˜ğ”¾âŸğ”½ğ•©}ğ•©@}Â´
in â† âŸ¨
  "[({(<(())[]>[[{[]{<()<>>"
  "[(()[<>])]({[<{<<[]>>("
  "{([(<{}[<>[]}>{[]{[(<()>"
  "(((({<>}<{<{<>}{[]{[]{}"
  "[[<[([]))<([[{}[[()]]]"
  "[{[{({}]{}}([{[{{{}}([]"
  "{<[[]]>}<{[{[{[]{()[[[]"
  "[<(<(<(<{}))><([]([]()"
  "<{([([[(<>()){}]>(<<{{"
  "<{([{{}}[<[[[<>{}]]]>[]]"
âŸ©
in â†© â€¢FLines "10.txt"

Score â† {(âŠ‘")]}>"âŠğ•©) âŠ‘ 3â€¿57â€¿1197â€¿25137â€¿0}

# iterate the string, keeping stack of parens
# return stack and error score
Parse â† {ğ•Š line:
  stack â† ""
  error â† 0
  While {ğ•¤ â‹„ 0â‰ â‰ line}â€¿{ğ•¤
    c â† âŠ‘line
    line â†© 1â†“line
    {âŠ‘câˆŠ"([{<"
      ? stack â†© câˆ¾stack
      ; p â† âŠ‘stack
        stack â†© 1â†“stack
        # check for correctness by seeing if ascii distance of
        # parens is 1 or 2
        {2<|c-p ? error â†© c â‹„ line â†© ""; 0}
    }
  }
  stack â‹ˆ Score error
}

stacks_scores â† >ParseÂ¨in
â€¢Show +Â´1âŠË˜stacks_scores

# incomplete inputs are those without errors
incomplete â† 0âŠË˜{(0=1âŠË˜ğ•©)/ğ•©}stacks_scores

CompletionScore â† {+Â´(" ([{<"âŠ¸âŠË˜ğ•©) Ã— âŒ½5â‹†â†•â‰ ğ•©}

# sort completion scores and print the middle one
â€¢Show (âŒŠ0.5Ã—â‰ incomplete)âŠ‘âˆ§CompletionScoreÂ¨incomplete
